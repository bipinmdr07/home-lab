services:
  postgres:
    image: postgres:16-alpine
    container_name: postgres
    restart: always
    shm_size: 128mb
    ports:
      - 5432:5432

  pgadmin:
    image: dpage/pgadmin4:latest
    container_name: pgadmin
    restart: always
    depends_on:
      - postgres
    labels:
    - traefik.enable=true
    - traefik.http.routers.pgadmin.rule=Host(`pgadmin.${DOMAIN:-orangepi2.box}`)
    - traefik.http.routers.pgadmin.entrypoints=web
    - traefik.http.services.pgladmin.loadbalancer.server.port=80
    - traefik.docker.network=homelab
